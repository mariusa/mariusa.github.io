---
layout: default
---
<!--

          <div class="section-header">
      <div class="container">
        <div class="row">

          <div class="col-lg-12">
              <h1 class="page-header">Writings</h1>
          </div>

        </div>
      </div> <!-- /.container -->
 <!--   </div> <!-- /.section-colored -->



    <div class="section">

      <div class="container">

          <h1>A better way to handle Backbone.js routes</h1>

          <p><br>While learning about Backbone.js, I saw there are a few ways to handle routes:</p>

          <h4>Define all routes in a single app router</h4>

    <p>
This leads to a <a target="_blank" href="http://stackoverflow.com/questions/10875257/how-can-i-avoid-this-long-router-file-in-backbonejs-requirejs">God router</a>,
    which knows everything about each of your app's modules. Adding/removing a module requires changing the God router.
          </p>

    <h4>Use sub-routers</h4>

<p>
    <a target="_blank" href="http://www.geekdave.com/2012/04/05/module-specific-subroutes-in-backbone/">Here's how</a>.
    This still requires a <a target="_blank" href="http://en.wikipedia.org/wiki/Zeus">"Zeus"</a> router.
    Rather than knowing everything, this router delegates  handling everyday well-being of the world to his children. It still has to know about them (all modules and sub-routers), though.
</p>

    <h4>Use an Event aggregator to coordinate views</h4>
       <p>
<a target="_blank" href="http://lostechies.com/derickbailey/2011/07/19/references-routing-and-the-event-aggregator-coordinating-views-in-backbone-js/">While droping the routes altogether</a>.

This loses all the route advantages (users are able to bookmark individual views, go back and forth using the browser's buttons, and send links to other users).
    <br>
Also, when linking to other screens, I'd rather use the plain old anchor element, rather than binding a 'click' listener to an element,
    which then triggers another event to actually show the detail. I'm a fan of "Less is more" minimalism, especially when it comes to code.
    </p>


          <h2>Could we do <span style="text-decoration: line-through; ">better</span> another way?</h2>

          <p>The above approaches aren't necessarily wrong. When reviewing this article, Jeremy Ashkenas told me that <i>"A large part of the point of Backbone is to do whatever works for you, and whatever you like best."</i><br> Here's yet another way: </p>

          <ol>
          <li>instantiate a <a target="_blank" href="http://en.wikipedia.org/wiki/I_know_that_I_know_nothing">socratic</a> router (global or member of the app) </li>





          <li>in each view's initialize() method, define routes handled by that view</li>

<li>instantiate all top-level views in main App view, before calling Backbone.history.start()</li>

<li>(optional) navigate to default view route when starting the app</li>
          </ol>
<br>
    Sample code is worth 1,024 words, so let's consider the traditional TODO app which
    <ul>
        <li>lists tasks at '#tasks'</li>
<li>shows details at '#taskDetails/123'</li>
          </ul>
<p>Here's how it would handle routes:


          </p>
          <script src="https://gist.github.com/mariusa/7873219.js"></script>
<br>
<p>
What do you think? Any improvements to share? <a target="_blank" href="https://gist.github.com/mariusa/7873219">Please comment on the gist</a>.
 </p>


      </div><!-- /.container -->

    </div><!-- /.section -->
